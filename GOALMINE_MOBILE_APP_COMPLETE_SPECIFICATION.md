# üì± GoalMine.ai Mobile App - Complete Specification & Requirements

## üéØ PROJECT OVERVIEW

**GoalMine.ai** is an AI-powered goal tracking and daily motivation platform that helps users create goals, maintain daily streaks, and receive personalized motivational content. This document provides complete specifications to build the mobile app version from scratch.

---

## üìã CURRENT GOALMINE.AI WEB APP - COMPLETE FEATURE SPECIFICATION

### üèóÔ∏è **Core Application Architecture**

**Technology Stack:**
- **Frontend**: React + TypeScript + Vite
- **UI Library**: shadcn-ui components + Tailwind CSS
- **Authentication**: Firebase (email/password + Google OAuth)
- **Database**: Supabase PostgreSQL with Row Level Security
- **API Layer**: Supabase Edge Functions (Deno runtime)
- **Email Service**: Resend for application emails
- **AI Integration**: OpenAI GPT-4 for content generation
- **Payments**: Stripe with webhook integration

**Live Application**: https://goalmine.ai

### üîê **Authentication System**

**Registration Flow:**
1. User signs up with email/password or Google OAuth
2. Email verification required for email signups
3. Firebase user automatically synced to Supabase profiles table
4. 30-day free trial begins automatically

**Login Flow:**
1. Firebase handles authentication
2. User redirected to dashboard if has goals, onboarding if no goals
3. Session persists across browser sessions

### üéØ **Goal Management System**

**Goal Creation Process:**
1. **4-Step Enhanced Form**:
   - Step 1: Goal title (required)
   - Step 2: Goal description (optional)
   - Step 3: Target completion date (optional)
   - Step 4: AI coaching tone selection (4 options)

2. **Coaching Tone Options**:
   - **Drill Sergeant**: Direct, no-nonsense motivation
   - **Kind & Encouraging**: Gentle, supportive approach
   - **Teammate**: Collaborative, we're-in-this-together energy
   - **Wise Mentor**: Thoughtful guidance with life lessons

3. **AI Content Generation**: Immediate GPT-4 content creation upon goal creation

**Goal Management Features:**
- **View Goals**: Dashboard grid layout with goal cards
- **Edit Goals**: Modify title, description, date, coaching tone
- **Delete Goals**: Confirmation dialog before deletion
- **Share Goals**: Social media sharing functionality
- **Goal Status**: Active, expired, trial-expired states

### ‚ö° **Daily Streak System**

**Check-in Mechanism:**
- **Honor System**: Users self-report daily progress
- **One Check-in Per Day**: After checking in, button shows "Checked in today"
- **Streak Counter**: Tracks consecutive days of progress
- **Reset Logic**: Streaks reset at 3 AM Eastern Time daily
- **Manual Reset**: Users can manually reset their streak with confirmation

**Streak Display:**
- Current streak count prominently displayed
- Flame icon indicating active streak
- Visual progress indicators

### ü§ñ **AI-Powered Motivation System**

**Daily Motivation Generation:**
- **GPT-4 Integration**: Personalized content based on goal and coaching tone
- **Content Structure**:
  ```typescript
  interface MotivationContent {
    message: string;         // Main motivational message (2-3 sentences)
    microPlan: string[];     // 3 actionable steps for the day
    challenge: string;       // Quick 2-minute task/challenge
    tone: string;           // Coaching tone used
  }
  ```

**Content Generation Triggers:**
- **Goal Creation**: Immediate motivation content generation
- **Daily Automation**: Fresh content generated by cron job
- **On-Demand Nudges**: Users can request motivation boosts

**Nudge System:**
- **Daily Limits**: Free users get 1 nudge/day, premium users get 3/day
- **Real-time Generation**: AI generates content on-demand
- **Fallback Content**: Graceful degradation when AI unavailable

### üìß **Email System (TO BE REPLACED WITH MOBILE NOTIFICATIONS)**

**Daily Email Automation:**
- **Timing**: 7 AM Eastern Time daily (fixed for all users)
- **Frequency**: 1 separate email per goal (not consolidated)
- **Content**: AI-generated motivation + goal progress
- **Delivery**: Resend email service using onboarding@resend.dev
- **Automation**: Vercel cron job triggers Supabase edge function

**Email Templates:**
- Professional HTML templates
- Goal-specific content
- Check-in links that deep-link to app
- Unsubscribe functionality

**Email Content Example:**
```
Subject: Day 12 - üèÉ‚Äç‚ôÇÔ∏è Run 3 miles daily

Hi there!

Every mile you run today builds the stamina for tomorrow's marathon! 
Your body is adapting and getting stronger with each step.

Today's Action Plan:
‚Ä¢ Start with 5 minutes of dynamic warm-up
‚Ä¢ Run at a comfortable pace for the first mile  
‚Ä¢ Focus on your breathing and form

Quick Challenge: Try running to a new playlist today - music can 
boost your performance by up to 15%!

[Check In Now] [View Goal Details]

Current Streak: 12 days üî•
```

### üí≥ **Subscription & Business Logic**

**Subscription Tiers:**
1. **Free Tier** (30-day trial):
   - 1 goal maximum
   - 1 daily nudge
   - All features included during trial

2. **Personal Plan** ($4.99/month):
   - 3 goals maximum
   - 3 daily nudges
   - Priority email delivery
   - Unlimited goal history

**Business Logic States:**
1. **Active Goals**: Normal operation, all features available
2. **Expired Goals**: Goals past target date
   - Permissions: Edit ‚úÖ Delete ‚úÖ | Check-in ‚ùå Emails ‚ùå Share ‚ùå
   - UI: Red "GOAL EXPIRED" badge
3. **Trial Expired**: 30+ days, not subscribed
   - Permissions: All actions disabled ‚ùå until upgrade
   - UI: Orange "TRIAL EXPIRED" badge + upgrade prompts

**Stripe Integration:**
- Checkout flow for subscription upgrades
- Webhook handling for subscription status changes
- Automatic feature gate enforcement

### üìä **Database Schema**

**Core Tables:**
```sql
-- User profiles (synced from Firebase)
CREATE TABLE profiles (
  id TEXT PRIMARY KEY,           -- Firebase UID
  email TEXT UNIQUE NOT NULL,
  display_name TEXT,
  goal_limit INTEGER DEFAULT 1,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  trial_start_date TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- User goals
CREATE TABLE goals (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id TEXT NOT NULL REFERENCES profiles(id),
  title TEXT NOT NULL,
  description TEXT,
  target_date DATE,
  coaching_tone TEXT NOT NULL,
  streak_count INTEGER DEFAULT 0,
  last_check_in DATE,
  last_motivation_date DATE,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- AI-generated motivation content
CREATE TABLE motivation_history (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  goal_id UUID NOT NULL REFERENCES goals(id) ON DELETE CASCADE,
  message TEXT NOT NULL,
  micro_plan TEXT[], -- Array of 3 action steps
  challenge TEXT,
  tone TEXT NOT NULL,
  generated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Subscription status (Stripe integration)
CREATE TABLE subscribers (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id TEXT NOT NULL REFERENCES profiles(id) UNIQUE,
  stripe_customer_id TEXT,
  stripe_subscription_id TEXT,
  plan_name TEXT NOT NULL,
  status TEXT NOT NULL, -- active, canceled, past_due
  current_period_end TIMESTAMP WITH TIME ZONE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### üîß **Backend Edge Functions**

**Authentication & Profile Management:**
- `create-user-profile`: Firebase ‚Üí Supabase sync
- `check-subscription`: Real-time subscription status verification

**Goal Operations:**
- `create-goal`: Enhanced creation with immediate AI content generation
- `fetch-user-goals`: Efficient goal retrieval with permissions
- `update-goal`: Complete editing with permission validation
- `delete-goal`: Cascade deletion with permission validation

**Daily Operations:**
- `check-in`: Daily streak updates with permission validation
- `reset-streak`: Manual streak reset functionality

**AI & Content Generation:**
- `generate-daily-motivation`: GPT-4 content with fallback
- `get-daily-motivation`: Content retrieval for display
- `generate-general-nudge`: On-demand motivation generation

**Email System (TO BE REPLACED):**
- `send-daily-emails`: Daily batch email delivery
- `send-motivation-email`: Individual email delivery
- `daily-cron`: Automation orchestration

**Business Logic:**
- `update-subscription`: Stripe webhook processing
- `create-checkout`: Payment processing initiation

### üé® **User Interface & Experience**

**Dashboard Layout:**
- Header with logo and user menu
- Goal statistics summary (total streak, active goals)
- Goal cards in responsive grid
- Create new goal button
- Nudge me button with usage counter

**Goal Card Features:**
- Goal title and description
- Current streak with flame icon
- Last check-in date
- Check-in button (disabled if already checked in today)
- Edit, delete, share action buttons
- Coaching tone indicator
- Expiration status badges

**Responsive Design:**
- Mobile-first approach
- Touch-friendly button sizes (44px minimum)
- Optimized for iOS Safari and Chrome Mobile
- Progressive enhancement

---

## üì± MOBILE APP TRANSFORMATION REQUIREMENTS

### üéØ **PRIMARY OBJECTIVE**
Transform GoalMine.ai from a web-based email system to a native mobile app experience with push notifications, touch-optimized UI, and mobile-first user flows.

### üîÑ **CORE TRANSFORMATION: EMAIL ‚Üí PUSH NOTIFICATIONS**

**Current Email System Replacement:**
Replace the entire Resend email system with Firebase Cloud Messaging push notifications.

**Push Notification Requirements:**
1. **Daily Motivation Notifications** (replaces daily emails):
   - **Timing**: 7 AM user's local timezone (not fixed Eastern)
   - **Content**: Same AI-generated motivation content as emails
   - **Rich Notifications**: Include full message, micro-plan preview
   - **Action Buttons**: 
     - "‚úÖ Check In Now" (deep links to goal check-in)
     - "üëÅÔ∏è View Goal" (opens goal detail screen)
     - "‚è∞ Remind Later" (snooze for 2 hours)

2. **Notification Content Structure**:
   ```typescript
   interface PushNotification {
     title: string;           // "Day 12 - üèÉ‚Äç‚ôÇÔ∏è Run 3 miles daily"
     body: string;            // First 100 chars of motivation message
     icon: string;            // App icon URL
     badge: string;           // Notification badge
     actions: NotificationAction[];
     data: {
       goalId: string;
       motivationId: string;
       streakCount: number;
       actionUrl: string;     // Deep link URL
     }
   }
   ```

3. **Smart Notification Features**:
   - **Timezone Awareness**: Respect user's local timezone
   - **Do Not Disturb**: Respect system notification settings
   - **Delivery Confirmation**: Track notification delivery success
   - **Fallback Strategy**: Email backup if push fails

4. **Background Service Requirements**:
   - **Service Worker**: Handle notifications when app is closed
   - **Background Sync**: Update streak data when app reopens
   - **Offline Queueing**: Queue check-ins when offline

### üì± **MOBILE-FIRST UI TRANSFORMATION**

**Bottom Tab Navigation System:**
Replace web browser navigation with native mobile tab structure:

1. **Dashboard Tab** (üè†):
   - Today's goals overview
   - Quick check-in actions
   - Daily motivation summary
   - Streak statistics

2. **Goals Tab** (üéØ):
   - All active goals list
   - Goal creation floating action button
   - Search and filter goals
   - Goal management actions

3. **Progress Tab** (üìä):
   - Streak charts and visualizations
   - Achievement milestones
   - Weekly/monthly progress summaries
   - Goal completion statistics

4. **Profile Tab** (üë§):
   - User settings and preferences
   - Notification settings
   - Subscription management
   - App settings

**Touch-Optimized Interactions:**

1. **Goal Cards with Swipe Actions**:
   - **Swipe Right**: Quick check-in (with haptic feedback)
   - **Swipe Left**: Reveal action menu (edit, delete, share)
   - **Tap**: Open goal detail screen
   - **Long Press**: Multi-select mode

2. **Native Mobile Patterns**:
   - **Pull-to-Refresh**: Refresh goals and motivation content
   - **Infinite Scroll**: Load older motivation history
   - **Native Modals**: Full-screen goal creation/editing
   - **Bottom Sheets**: Action menus and options

3. **Touch Target Optimization**:
   - Minimum 44px tap areas for all interactive elements
   - Thumb-friendly layout with important actions in easy reach
   - Visual feedback for all touch interactions
   - Proper spacing to prevent accidental taps

### üîî **COMPREHENSIVE NOTIFICATION SYSTEM**

**Notification Types & Triggers:**

1. **Daily Motivation** (7 AM local time):
   - Primary notification replacing email system
   - Personalized content based on goal and coaching tone
   - Action buttons for immediate check-in

2. **Streak Milestones** (real-time):
   - 7-day streak: "üî• One week strong! You're building momentum!"
   - 30-day streak: "üéâ 30 days! You've officially built a habit!"
   - 100-day streak: "üèÜ 100 days! You're a goal-achieving machine!"

3. **Smart Reminders** (behavioral):
   - Missed check-in: "Don't break the streak! Quick check-in?"
   - Streak recovery: "Every expert was once a beginner. Start again?"
   - Weekly summary: "Your week in goals: 5/7 days checked in!"

4. **Goal-Specific Notifications**:
   - Goal approaching target date: "2 weeks left on your marathon goal!"
   - Goal expired: "Ready to set a new target date?"
   - New goal created: "Your AI coach is preparing daily motivation!"

**Notification Personalization:**
- **Tone Matching**: Notifications match user's selected coaching tone
- **Time Learning**: Learn optimal notification times from user behavior
- **Frequency Control**: User-configurable notification frequency
- **Smart Grouping**: Bundle multiple goal notifications intelligently

### üì± **MOBILE-SPECIFIC FEATURES**

**Offline-First Functionality:**
1. **Core Offline Features**:
   - View all goals and current streaks
   - Check in to goals (syncs when online)
   - View cached motivation content
   - Access goal details and progress

2. **Sync Strategy**:
   - **Real-time**: Check-ins and streak updates
   - **Background**: Daily motivation content download
   - **Conflict Resolution**: Handle offline changes properly

**Device Integration:**
1. **Biometric Authentication**:
   - Face ID / Touch ID support after initial login
   - Secure token storage in device keychain
   - Optional 4-digit PIN for quick access

2. **Haptic Feedback**:
   - Check-in confirmation vibration
   - Milestone achievement celebration
   - Swipe action feedback

3. **Native Features**:
   - **Deep Linking**: Handle notification taps properly
   - **Background App Refresh**: Update content when app becomes active
   - **Share Extension**: Share achievements to social media
   - **Siri Shortcuts**: "Check in to my running goal"

### üîß **TECHNICAL REQUIREMENTS**

**Project Structure:**
- **New Repository**: Separate from web app for independent development
- **Shared Backend**: Use existing Supabase/Firebase infrastructure
- **Progressive Web App**: Advanced PWA with native-like experience

**Development Environment:**
- **Framework**: React + TypeScript + Vite (same as web app)
- **PWA Framework**: Vite PWA plugin with Workbox
- **Push Notifications**: Firebase Cloud Messaging
- **UI Library**: Mobile-optimized component library
- **Testing**: Real device testing on iOS and Android

**Performance Requirements:**
- **App Startup**: < 2 seconds to interactive on mobile networks
- **Navigation**: < 200ms transitions between screens
- **Offline Support**: 80% of features work without internet
- **Battery Usage**: < 5% daily battery consumption
- **Notification Delivery**: > 95% successful delivery rate

### üöÄ **USER FLOW TRANSFORMATIONS**

**Morning Motivation Flow (Mobile):**
1. **7 AM Local Time**: User receives rich push notification
2. **Notification Content**: "Day 13 - üèÉ‚Äç‚ôÇÔ∏è Run 3 miles daily\nEvery mile builds tomorrow's stamina..."
3. **Action Button Tap**: "‚úÖ Check In Now"
4. **Deep Link**: App opens directly to goal check-in screen
5. **One-Tap Check-In**: Immediate streak update with haptic feedback
6. **Success Animation**: Celebration animation for streak milestone
7. **Share Option**: Quick share achievement to social media

**Goal Creation Flow (Mobile):**
1. **Tap FAB**: Floating action button in Goals tab
2. **Full-Screen Modal**: Native mobile form presentation
3. **Step-by-Step Wizard**:
   - Screen 1: Goal title with smart keyboard suggestions
   - Screen 2: Description with voice-to-text option
   - Screen 3: Target date with native date picker
   - Screen 4: Coaching tone with preview samples
4. **AI Generation**: Loading animation while GPT-4 creates content
5. **Success Feedback**: Goal card animates into list
6. **Immediate Motivation**: First motivation content displayed

**Weekly Progress Flow (Mobile):**
1. **Sunday 6 PM**: Weekly summary push notification
2. **Rich Content**: "This week: 5/7 goals checked in! üéØ"
3. **Tap to Open**: App opens to Progress tab
4. **Visual Charts**: Touch-friendly progress visualization
5. **Insights**: AI-generated insights about progress patterns
6. **Planning**: Suggested adjustments for next week
7. **Share Success**: One-tap social media sharing

### üìä **SUCCESS METRICS & VALIDATION**

**User Engagement Metrics:**
- **Push Notification Opt-In Rate**: Target > 70%
- **Daily Check-In Rate**: Target 25% increase vs. web app
- **Session Duration**: Target 40% longer sessions
- **Weekly Active Users**: Target 35% increase
- **Goal Completion Rate**: Target 30% improvement

**Technical Performance Metrics:**
- **App Install Rate**: > 50% of mobile visitors install PWA
- **Notification Delivery**: > 95% successful delivery
- **Offline Usage**: 80% of users use offline features
- **App Startup Time**: < 2 seconds average
- **Crash Rate**: < 0.1% of sessions

**Business Impact Metrics:**
- **User Retention**: 60% improvement in 7-day retention
- **Subscription Conversion**: 40% higher mobile conversion rate
- **Support Ticket Reduction**: 50% fewer mobile-related issues
- **App Store Rating**: Target 4.8+ stars
- **Revenue per User**: 25% increase from mobile users

### üõ†Ô∏è **IMPLEMENTATION SPECIFICATIONS**

**Phase 1: Foundation (Weeks 1-2)**
1. Create new mobile app project structure
2. Set up PWA configuration with service worker
3. Implement basic mobile navigation structure
4. Configure Firebase Cloud Messaging
5. Create push notification permission flow

**Phase 2: Core Features (Weeks 3-5)**
1. Transform goal management for mobile interface
2. Implement touch-optimized goal cards with swipe actions
3. Build mobile-first goal creation flow
4. Create comprehensive notification system
5. Implement offline functionality and background sync

**Phase 3: Advanced Features (Weeks 6-8)**
1. Add biometric authentication
2. Implement haptic feedback and device integration
3. Create advanced notification personalization
4. Build progress visualization and analytics
5. Add social sharing and achievement system

**Phase 4: Polish & Launch (Weeks 9-10)**
1. Performance optimization and testing
2. Cross-device testing and debugging
3. App store optimization and assets
4. User acceptance testing and feedback
5. Production deployment and monitoring

### üéØ **QUALITY ASSURANCE REQUIREMENTS**

**Testing Strategy:**
1. **Device Testing**: iPhone (12, 13, 14), Android (Samsung, Pixel)
2. **Network Testing**: 3G, 4G, WiFi, offline scenarios
3. **Notification Testing**: Background, foreground, action buttons
4. **Battery Testing**: 24-hour usage impact analysis
5. **Accessibility Testing**: Screen readers, voice control, large text

**Launch Criteria:**
- [ ] Push notifications work 100% reliably
- [ ] Offline mode supports all core features
- [ ] App startup time < 2 seconds on all tested devices
- [ ] No critical bugs or crashes in testing
- [ ] User feedback score > 4.5/5 in beta testing

---

## üöÄ DEVELOPMENT SETUP INSTRUCTIONS

**Project Initialization:**
```bash
# Create new mobile app project
mkdir goalmine-mobile-app
cd goalmine-mobile-app
npm create vite@latest . -- --template react-ts

# Install mobile-specific dependencies
npm install vite-plugin-pwa workbox-window
npm install firebase @supabase/supabase-js
npm install react-router-dom @tanstack/react-query
npm install lucide-react sonner date-fns
npm install @radix-ui/react-* (UI components)

# Configure for mobile development
# - Port 5174 (different from web app)
# - PWA manifest and service worker
# - Firebase Cloud Messaging setup
```

**Environment Configuration:**
```env
# Firebase Configuration (same as web app)
VITE_FIREBASE_API_KEY=AIzaSyDqxbqX-z6L6kYvWZGnKIttNz0GWm6IQAg
VITE_FIREBASE_AUTH_DOMAIN=goalmineai.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=goalmineai
VITE_FIREBASE_MESSAGING_SENDER_ID=518935050036
VITE_FIREBASE_APP_ID=1:518935050036:web:959d74e2914a12bff2d761

# Supabase Configuration (same as web app)
VITE_SUPABASE_URL=https://dhlcycjnzwfnadmsptof.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Mobile-specific
VITE_APP_MODE=mobile
VITE_VAPID_KEY=<Firebase VAPID key for push notifications>
```

**Development URLs:**
- **Local Development**: http://localhost:5174
- **Mobile Testing**: http://[YOUR_IP]:5174
- **PWA Installation**: Available on mobile browsers
- **Notification Testing**: Firebase console message composer

---

This comprehensive specification provides everything needed to build the complete GoalMine.ai mobile app transformation, including all current features, mobile-specific requirements, technical specifications, and implementation guidance for a standalone development project.