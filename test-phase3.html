<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 3 Testing - Goal Status & Permissions</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .container {
            display: grid;
            gap: 20px;
        }
        .test-section {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            background: #f9f9f9;
        }
        h2 {
            margin-top: 0;
            color: #333;
        }
        .goal-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }
        .status-active { background: #4ade80; color: white; }
        .status-goal-expired { background: #fb923c; color: white; }
        .status-trial-expired { background: #f87171; color: white; }
        .permissions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .permission {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
        }
        .can { background: #bbf7d0; color: #166534; }
        .cannot { background: #fecaca; color: #991b1b; }
        button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            background: #3b82f6;
            color: white;
            cursor: pointer;
            margin-right: 10px;
        }
        button:disabled {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }
        button:hover:not(:disabled) {
            background: #2563eb;
        }
        .info-box {
            background: #e0f2fe;
            border: 1px solid #0284c7;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 20px;
        }
        .actions {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e5e7eb;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Phase 3 Testing: Goal Status & Permissions</h1>
    
    <div class="info-box">
        <strong>Instructions:</strong> 
        <ol>
            <li>Log in as different users to test various scenarios</li>
            <li>Check that goal statuses are correctly displayed</li>
            <li>Verify that permissions match the business rules</li>
            <li>Test with goals that have different target dates</li>
            <li>Test with expired and active trial users</li>
        </ol>
    </div>

    <div class="container">
        <!-- Test Scenario 1: Active Goal + Active Trial -->
        <div class="test-section">
            <h2>Scenario 1: Active Goal + Active Trial</h2>
            <div class="goal-card">
                <strong>Goal: Learn Spanish</strong>
                <span class="status-badge status-active">ACTIVE</span>
                <br>
                <small>Target Date: 2025-12-31 (Future)</small>
                <br>
                <small>Trial Expires: 2026-01-01 (Active)</small>
                
                <div class="permissions">
                    <span class="permission can">âœ“ Can Edit</span>
                    <span class="permission can">âœ“ Can Delete</span>
                    <span class="permission can">âœ“ Can Check In</span>
                    <span class="permission can">âœ“ Can Share</span>
                    <span class="permission can">âœ“ Can Receive Emails</span>
                    <span class="permission can">âœ“ Can Generate Nudge</span>
                </div>
                
                <div class="actions">
                    <button>Check In</button>
                    <button>Edit</button>
                    <button>Delete</button>
                    <button>Share</button>
                    <button>Nudge Me</button>
                </div>
            </div>
        </div>

        <!-- Test Scenario 2: Expired Goal + Active Trial -->
        <div class="test-section">
            <h2>Scenario 2: Expired Goal + Active Trial</h2>
            <div class="goal-card">
                <strong>Goal: Quit Smoking</strong>
                <span class="status-badge status-goal-expired">GOAL EXPIRED</span>
                <br>
                <small>Target Date: 2024-01-01 (Expired)</small>
                <br>
                <small>Trial Expires: 2026-01-01 (Active)</small>
                
                <div class="permissions">
                    <span class="permission can">âœ“ Can Edit</span>
                    <span class="permission can">âœ“ Can Delete</span>
                    <span class="permission cannot">âœ— Cannot Check In</span>
                    <span class="permission cannot">âœ— Cannot Share</span>
                    <span class="permission cannot">âœ— Cannot Receive Emails</span>
                    <span class="permission cannot">âœ— Cannot Generate Nudge</span>
                </div>
                
                <div class="actions">
                    <button disabled>Check In</button>
                    <button>Edit (Extend Date)</button>
                    <button>Delete</button>
                    <button disabled>Share</button>
                    <button disabled>Nudge Me</button>
                </div>
            </div>
        </div>

        <!-- Test Scenario 3: Active Goal + Expired Trial (Not Subscribed) -->
        <div class="test-section">
            <h2>Scenario 3: Active Goal + Expired Trial (Free User)</h2>
            <div class="goal-card">
                <strong>Goal: Write a Book</strong>
                <span class="status-badge status-trial-expired">TRIAL EXPIRED</span>
                <br>
                <small>Target Date: 2025-12-31 (Future)</small>
                <br>
                <small>Trial Expired: 2024-01-01 (Expired - Not Subscribed)</small>
                
                <div class="permissions">
                    <span class="permission cannot">âœ— Cannot Edit</span>
                    <span class="permission cannot">âœ— Cannot Delete</span>
                    <span class="permission cannot">âœ— Cannot Check In</span>
                    <span class="permission cannot">âœ— Cannot Share</span>
                    <span class="permission cannot">âœ— Cannot Receive Emails</span>
                    <span class="permission cannot">âœ— Cannot Generate Nudge</span>
                </div>
                
                <div class="actions">
                    <button disabled>Check In</button>
                    <button disabled>Edit</button>
                    <button disabled>Delete</button>
                    <button disabled>Share</button>
                    <button disabled>Nudge Me</button>
                    <button style="background: #f59e0b;">ðŸŽ¯ Upgrade to Continue</button>
                </div>
            </div>
        </div>

        <!-- Test Scenario 4: Any Goal + Expired Trial (Subscribed) -->
        <div class="test-section">
            <h2>Scenario 4: Goal + Expired Trial (Paid Subscriber)</h2>
            <div class="goal-card">
                <strong>Goal: Start a Business</strong>
                <span class="status-badge status-active">ACTIVE (SUBSCRIBED)</span>
                <br>
                <small>Target Date: 2025-12-31 (Future)</small>
                <br>
                <small>Trial Expired: 2024-01-01 (But user is subscribed)</small>
                
                <div class="permissions">
                    <span class="permission can">âœ“ Can Edit</span>
                    <span class="permission can">âœ“ Can Delete</span>
                    <span class="permission can">âœ“ Can Check In</span>
                    <span class="permission can">âœ“ Can Share</span>
                    <span class="permission can">âœ“ Can Receive Emails</span>
                    <span class="permission can">âœ“ Can Generate Nudge</span>
                </div>
                
                <div class="actions">
                    <button>Check In</button>
                    <button>Edit</button>
                    <button>Delete</button>
                    <button>Share</button>
                    <button>Nudge Me</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('Phase 3 Test Page Loaded');
        console.log('This is a visual reference for expected behavior.');
        console.log('Test the actual app at http://localhost:5173 to verify:');
        console.log('1. Goal statuses are correctly calculated');
        console.log('2. Permissions are properly enforced');
        console.log('3. UI buttons are enabled/disabled appropriately');
    </script>
</body>
</html>